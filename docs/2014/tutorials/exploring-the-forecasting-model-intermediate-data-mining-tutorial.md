---
title: 予測モデルの調査 (中級者向けデータマイニングチュートリアル) |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: 0a00f409-050f-4b92-9763-ba31a6aa3052
author: minewiskan
ms.author: owend
manager: kfile
ms.openlocfilehash: 607f300fbf2138796bb02c66c62386fcc93e6a45
ms.sourcegitcommit: 6fd8c1914de4c7ac24900fe388ecc7883c740077
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/26/2020
ms.locfileid: "62992266"
---
# <a name="exploring-the-forecasting-model-intermediate-data-mining-tutorial"></a>予測モデルの検証 (中級者向けデータ マイニング チュートリアル)
  予測マイニングモデルを作成したので、データマイニングデザイナーの [**マイニングモデルビューアー** ] タブを使用して結果を調べることができます。 タイム[!INCLUDE[msCoName](../includes/msconame-md.md)]シリーズビューアーには、**グラフ**と**モデル**の2つのタブがあります。  
  
 また、すべてのモデルで Microsoft 汎用ツリー ビューアーを使用できます。 それぞれのビューに、時系列モデルの情報が少しずつ異なる方法で表示されます。  
  
-   [[グラフ] タブ](#bkmk_Charts)  
  
-   [[モデル] タブ](#bkmk_Model)  
  
-   [Microsoft 汎用コンテンツ ビューアー](#bkmk_Content)  
  
##  <a name="charts-tab"></a><a name="bkmk_Charts"></a>[グラフ] タブ  
 タイムシリーズビューアーの [グラフ] タブには、履歴データと予測を含む各系列がグラフィカルに表示されます。 **Charts** [!INCLUDE[msCoName](../includes/msconame-md.md)] 時系列グラフのそれぞれの線は、製品、地域、および予測可能な属性の一意の組み合わせを表します。  
  
 ビューアーの右側の凡例には、ドロップダウン リストでの選択に基づいて、選択可能なすべての時系列が表示されます。 凡例で、これらのチェック ボックスをオンまたはオフにして、グラフに表示する時系列を指定できます。  
  
 各時系列に対して使用する色などの表示オプション、またはグラフの点に値を表示するかどうかを変更することもできます。  
  
#### <a name="to-select-a-time-series"></a>時系列を選択するには  
  
1.  [**マイニングモデルビューアー** ] タブが表示されていない場合は、[**グラフ**] タブをクリックします。  
  
2.  グラフ ビューの右側にあるドロップダウン リストをクリックし、すべてのチェック ボックスをオンにします。 [!INCLUDE[clickOK](../includes/clickok-md.md)]  
  
     グラフに 24 本の異なる系列線が表示されます。  
  
3.  グラフの右側にあるチェックボックスをオフにして、金額に基づくすべての系列の線を一時的に非表示にします。  
  
     次に、R750 と R250 という自転車に関連するチェック ボックスをオフにします。  
  
     これで、グラフに含まれる系列線は次の 6 つだけになるため、M200 と T1000 という自転車の傾向を比較しやすくなります。  
  
    -   **M200 Europe: Quantity**  
  
    -   **M200 North America: Quantity**  
  
    -   **M200 Pacific: Quantity**  
  
    -   **T1000 Europe: Quantity**  
  
    -   **T1000 North America: Quantity**  
  
    -   **T1000 Pacific: Quantity**  
  
 ![M200 および T1000 の数量を予測するシリーズ](../../2014/tutorials/media/6series-defaultforecasting.gif "M200 および T1000 の数量を予測するシリーズ")  
  
 このビューアーに表示されるグラフには、履歴データと予測データの両方が含まれます。 履歴データと区別できるよう、予測データの部分は網掛けされています。 個々の系列を比較しやすくするために、グラフのそれぞれの線に関連付けられている色を変更することもできます。 詳細については、「 [データ マイニング ビューアーで使用する色の変更](../../2014/analysis-services/data-mining/change-the-colors-used-in-the-data-mining-viewer.md)」を参照してください。  
  
 これらの傾向線からは、どの地域でも総売上がしだいに増加しており、12 か月目 (つまり 12 月) でピークに達していることがわかります。 またグラフから、T1000 という自転車のデータが他の製品系列のデータより大幅に遅れて始まっていることもわかります。 これは、この製品が新しい製品であるためです。この系列については、基になるデータが十分でないため、正確な予測が得られない可能性があります。  
  
 既定では、各時系列について、5 つの予測期間分の予測が点線で表示されます。 この値を変更して、表示する予測を増減することもできます。 グラフに誤差帯を追加することで、予測の標準偏差をグラフィカルに表示することもできます。  
  
#### <a name="to-change-prediction-and-display-options-in-the-chart-view"></a>グラフ ビューの予測オプションと表示オプションを変更するには  
  
1.  **予測手順**の値を徐々に変更し、 **5**から**10**に増やしてから**6**に戻します。  
  
     履歴データの変動幅が大きい場合は、予測の数を増やすと変動が繰り返される傾向にあり、増幅されることもあります。 多くの場合、この時点である程度の調査が必要になります。この調査で、履歴データの大幅な増加の原因を特定し、それらの結果をそのまま使用するか、ソース データに修正する箇所がないかどうかを探すか、モデルの線をいずれかの方法で滑らかにするかを判断することになります。  
  
2.  [**偏差の表示**] チェックボックスをオンにします。  
  
     このオプションをオンにすると、それぞれの予測値について、推定される誤差が表示されます。  
  
3.  X 軸のスケールを確認します。 履歴データと予測データの変化はどちらも常に比率で表されますが、実際の値はグラフにすべての値が表示されるように自動的に調整されます。 そのため、モデルを比較するときは、視覚的な見た目だけに頼らないように注意が必要です。 正確な値、または予測の増加率と値の割合を取得するには、点線または実線の上にマウスポインターを置くか、線をクリックして [**マイニング凡例**] の値を表示します。  
  
     **ヒント**: [**マイニング凡例**] が表示されていない場合は、**モデル**ビューに切り替え、任意のノードを右クリックして、[**凡例の表示**] を選択します。  
  
 これらの傾向を見て、一部の系列のデータが十分でないことが気になるときは、モデル別の売上の平均 (地域別の売上の平均など) を求めて予測の信頼性を高めることもできます。 この方法については、このチュートリアルのレッスンで後ほど説明します。  
  
 [ページのトップへ](#bkmk_Charts)  
  
##  <a name="model-tab"></a><a name="bkmk_Model"></a>[モデル] タブ  
 データ**Model**マイニングデザイナーの[!INCLUDE[msCoName](../includes/msconame-md.md)]タイムシリーズビューアーの [モデル] タブでは、予測モデルをツリーグラフの形式で表示できます。  
  
 最初に注目する点は、ここで使用しているデータでは、複数の製品ライン (T1000 など) について、売上を示すメジャーがそれぞれ 2 つ (Amount と Quantity) あり、地域がそれぞれ 3 つ (ヨーロッパ、北米、および太平洋) に分かれているため、作成したモデルは実質的に 24 個のツリーで構成されているということです。それらの各ツリーが、地域、製品、および予測可能な属性の組み合わせがそれぞれ異なる売上パターンのモデルを表しています。  
  
 [**モデル**] タブの [**ツリー** ] ボックスの一覧から系列を選択すると、表示する製品ライン、地域、および販売メトリックの組み合わせを選択できます。  
  
 ここで、モデルをツリーとして表示すると何がわかるか考えてみましょう。 例として、2つのモデルを比較してみましょう。1つはツリー内に複数のレベルを持ち、もう1つは1つのノードを持つモデルです。  
  
-   ツリー グラフのノードが 1 つだけの場合は、モデルで検出された傾向が時間の経過によってほとんど変化しないことを意味します。 この1つのノードである [**すべて**] を使用すると、入力変数と結果の関係を示す式を表示できます。  
  
-   時系列のツリー グラフに複数の分岐がある場合は、検出された時系列が複雑すぎて、1 つの式では表せないことを意味します。 代わりに、ツリーグラフに複数の分岐が含まれている可能性があります。各分岐には、ツリーが*分割*される原因となった条件がラベル付けされています。 ツリーが分割されている場合、各分岐はそれぞれの時間の単位を表し、その時間単位ごとに 1 つの式で傾向を表すことができます。  
  
     たとえば、グラフグラフを見ているときに、9月に開始された売上ボリュームの急激なジャンプと、年の終わりの休日を確認すると、**モデル**ビューに切り替えて、傾向が変更された正確な日付を確認することができます。 "9 月前" と "9 月以降" を表すツリー内の分岐には、さまざまな数式が含まれます。たとえば、分割までの売上傾向を計算する数式と、年9月から年末の休日までの売上傾向を示すもう1つの数式があります。  
  
#### <a name="to-explore-the-decision-tree-for-a-time-series-model"></a>時系列モデルに対応するデシジョン ツリーを調査するには  
  
1.  ビューアーの [**モデル**] タブの [**ツリー** ] ボックスの一覧で、[ **T1000 欧州: Amount** ] 系列を選択します。  
  
     [**すべて**] というラベルの付いたノードをクリックします。  
  
     **すべて**のノードについて、表示されるツールヒントには、系列全体のケースの数、データの分析から得られた時系列式などの情報が含まれます。  
  
2.  [**マイニング凡例**] が表示されていない場合は、ノードを右クリックし、[**凡例の表示**] をクリックします。  
  
     **マイニング凡例**には、ツールヒントに表示される情報とほぼ同じ情報が表示されます。 不連続な独立変数がある場合は、ノード内の変数の分布を示すヒストグラムも表示されます。  
  
3.  次に、別の時系列を選択して表示します。 ビューアーの [**モデル**] タブにある**ツリー**リストを使用して、[ **M200 北米: Amount** ] 系列を選択します。  
  
     ツリーグラフには、**すべて**のノードと2つの子ノードが含まれるようになりました。 子ノードのラベルから、どの時点で傾向線が変化したか確認できます。  
  
     各子ノードについて、**マイニング凡例**の説明には、ツリーの各分岐のケースの数も含まれます。  
  
 ツリー ビューアーには、ほかにも次のような機能があります。  
  
-   グラフに表示される変数は、**背景**コントロールを使用して変更できます。 既定では、[**背景**] の値が [**母集団**] に設定されているため、暗いノードにはより多くのケースが含まれます。 ノードに存在するケースの数を確認するには、ノード上でマウスポインターをポイントし、表示されたツールヒントを表示するか、ノードをクリックして [**ノードの凡例**] ウィンドウで数値を表示します。  
  
-   ツールヒントにはノードの回帰式も表示されます。これについても、ノードをクリックして確認することもできます。 混合モデルを作成した場合は、ARIMA の式 (リーフ ノード内) と ARTXP の式 (ツリーのルート ノード内) の 2 つが表示されます。  
  
-   ノードでは、連続する数値が小さなひし形で表されます。 属性の範囲は、そのひし形が示されたバーに表示されます。 このひし形はノードの中間にあり、ひし形の幅がそのノードの属性の分散を表します。  
  
 [ページのトップへ](#bkmk_Charts)  
  
##  <a name="optional-generic-content-tree-viewer"></a><a name="bkmk_Content"></a>Optional汎用コンテンツツリービューアー  
 タイムシリーズのカスタムビューアーに加えて、に[!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)]は、すべてのデータマイニングモデルで使用するための**Microsoft 汎用コンテンツツリービューアー**が用意されています。 このビューアーには、次のような利点があります。  
  
-   **Microsoft タイムシリーズビューアー**: このビューでは、2つのアルゴリズムの結果がマージされます。 各系列を別々に表示することもできますが、その場合、各アルゴリズムの結果がどのように結合されたかを判別できません。 また、このビューでは、ツールチップと [マイニング凡例] に重要な統計情報だけが表示されます。  
  
-   **汎用コンテンツツリービューアー**: モデルで一度に使用されたすべてのデータ系列を参照および表示できます。また、混合モデルを作成した場合は、ARIMA ツリーと artxp ツリーの両方が同じグラフに表示されます。  
  
     このビューアーを使用すると、両方のアルゴリズムからすべての統計情報を取得できるだけでなく、値の分布も確認できます。  
  
     ARIMA と ARTXP の分析について詳しく調べたい場合など、データ マイニングの上級ユーザー向けのビューアーです。  
  
#### <a name="to-view-details-for-a-particular-data-series-in-the-generic-content-viewer"></a>汎用コンテンツ ビューアーで特定のデータ系列の詳細を表示するには  
  
1.  [**マイニングモデルビューアー** ] タブで、[**ビューアー** ] ボックスの一覧から [ **Microsoft 汎用コンテンツツリービューアー** ] を選択します。  
  
2.  [**ノードのキャプション**] ペインで、最上位の [すべて] ノードをクリックします。  
  
3.  [**ノードの詳細**] ペインで、[ATTRIBUTE_NAME] の値を確認します。  
  
     この値から、このノードにどの系列 (製品と地域の組み合わせ) が含まれているかがわかります。 AdventureWorks の例では、最上位ノードは M200 Europe 系列のノードです。  
  
4.  [**ノードのキャプション**] ペインで、子ノードを持つ最初のノードを見つけます。  
  
     系列ノードに子がある場合、Microsoft タイムシリーズビューアーの [**モデル**] タブに表示されるツリービューにも分岐構造があります。  
  
5.  ノードを展開し、いずれかの子ノードをクリックします。  
  
     スキーマの NODE_DESCRIPTION 列に、ツリーが分割される原因になった条件が含まれています。  
  
6.  [**ノードのキャプション**] ペインで、最上位の ARIMA ノードをクリックし、すべての子ノードが表示されるまでノードを展開します。  
  
7.  [**ノードの詳細**] ペインで、[ATTRIBUTE_NAME] の値を確認します。  
  
     この値から、このノードに含まれている時系列がわかります。 ARIMA セクションの最上位ノードは [(すべて)] セクションの最上位ノードと一致するはずです。 AdventureWorks の例では、このノードには M200 Europe 系列に対する ARIMA 分析が含まれています。  
  
 詳細については、「[タイム シリーズ モデルのマイニング モデル コンテンツ &#40;Analysis Services - データ マイニング&#41;](../../2014/analysis-services/data-mining/mining-model-content-for-time-series-models-analysis-services-data-mining.md)」を参照してください。  
  
 [ページのトップへ](#bkmk_Charts)  
  
## <a name="next-task-in-lesson"></a>このレッスンの次の作業  
 [タイムシリーズ予測の作成 &#40;中級者向けデータマイニングチュートリアル&#41;](../../2014/tutorials/creating-time-series-predictions-intermediate-data-mining-tutorial.md)  
  
## <a name="see-also"></a>参照  
 [タイムシリーズモデルのクエリ例](../../2014/analysis-services/data-mining/time-series-model-query-examples.md)   
 [Microsoft タイム シリーズ アルゴリズム テクニカル リファレンス](../../2014/analysis-services/data-mining/microsoft-time-series-algorithm-technical-reference.md)  
  
  
