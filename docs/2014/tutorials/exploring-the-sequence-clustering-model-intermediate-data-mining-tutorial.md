---
title: シーケンスクラスターモデルの検証 (中級者向けデータマイニングチュートリアル) |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: f8a485d5-47ed-4dd5-bb66-ef4d6d463845
author: minewiskan
ms.author: owend
manager: kfile
ms.openlocfilehash: e0904239933361b80727700c94b03e379751251f
ms.sourcegitcommit: 6fd8c1914de4c7ac24900fe388ecc7883c740077
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/26/2020
ms.locfileid: "63164052"
---
# <a name="exploring-the-sequence-clustering-model-intermediate-data-mining-tutorial"></a>シーケンス クラスター モデルの検証 (中級者向けデータ マイニング チュートリアル)
  ここまでで、リージョンモデル**を使用してシーケンスクラスター**を構築しました。次[!INCLUDE[msCoName](../includes/msconame-md.md)]は、データマイニングデザイナーの [**マイニングモデルビューアー** ] タブにあるシーケンスクラスタービューアーを使用して、シーケンスクラスターを調べることができます。 シーケンス[!INCLUDE[msCoName](../includes/msconame-md.md)]クラスタービューアーには、**クラスターダイアグラム**、クラスターの**プロファイル**、**クラスターの特性**、 **clusterdiscrimination**、**状態遷移**の5つのタブがあります。 このビューアーの使用方法の詳細については、「 [Microsoft シーケンスクラスタービューアーを使用したモデルの参照](../../2014/analysis-services/data-mining/browse-a-model-using-the-microsoft-sequence-cluster-viewer.md)」を参照してください。  
  
-   [[クラスターダイアグラム] タブ](#bkmk_CDiagram)  
  
-   [[クラスターのプロファイル] タブ](#bkmk_CProfiles)  
  
-   [[クラスターの特性] タブ](#bkmk_CChars)  
  
-   [[クラスターの識別] タブ](#bkmk_CDiscrim2)  
  
-   [[状態遷移] タブ](#bkmk_StateTran)  
  
-   [汎用コンテンツ ツリー ビューアー](#bkmk_Generic)  
  
##  <a name="cluster-diagram-tab"></a><a name="bkmk_CDiagram"></a>[クラスターダイアグラム] タブ  
 [**クラスターダイアグラム**] タブには、アルゴリズムによってデータベースで検出されたクラスターがグラフィカルに表示されます。 ダイアグラムのレイアウトは、類似するクラスターを緊密にグループ化したクラスターのリレーションシップを表します。 既定では、各ノードの色の濃さはクラスターに存在するケースの密度を表し、ノード色が濃くなるほど多数のケースが存在することになります。 ノードの色の濃さが各クラスター内の属性や状態のサポートを表すように、設定を変更することもできます。  
  
 目的のクラスターを簡単に識別したり操作したりできるようにクラスターの名前を変更することもできます。 このチュートリアルでは、太平洋地域の顧客の割合が最も高いクラスターと全体のケースの数が最も多いクラスターの名前を変更します。  
  
> [!NOTE]  
>  データとモデル パラメーターによっては、モデルを再処理したときに、特定のクラスターに割り当てられたケースが変更されることがあります。 また、クラスターの名前を変更した場合、それらの名前は、マイニング モデルを再処理すると失われます。  
  
#### <a name="to-change-the-attribute-used-for-highlighting-clusters"></a>クラスターを強調表示するために使用される属性を変更するには  
  
1.  [**シェーディング変数**] ボックスの一覧で、[**モデル**] を選択します。  
  
2.  [**状態**] ボックスの一覧で [**サイクルの上限**] を選択します。  
  
     ダイアグラムが更新されて、選択した製品の各クラスターにおける集中度が表示されます。 最も色の濃いクラスターに、サイクリング キャップが最も高い密度で含まれます。 任意の入力列の任意の状態を使用するように、シェーディング変数を変更できます。  
  
3.  [**網掛け変数**] の一覧で、[**母集団**] を選択します。  
  
     シェーディング変数を母集団に変更すると、ダイアグラムが更新されて、クラスターがサイズで比較されるようになります。 最も色の濃いクラスターに最も多くのケースが含まれています。  
  
#### <a name="to-rename-nodes-in-the-model"></a>モデルのノードの名前を変更するには  
  
1.  **シェーディング変数**をに`Region`変更し、 **State**を**太平洋**に設定します。  
  
2.  グラフで最も色の濃いノードを強調表示させます。  
  
3.  このクラスターを右クリックし、[**クラスター名の変更**] を選択します。  
  
4.  「太平洋クラスター」という名前を入力し**ます。**  
  
5.  [**シェーディング変数**の値を**母集団**に変更します。  
  
6.  更新されたグラフで、最も色の濃いクラスター (最も大きなクラスター) を見つけます。 色の濃さからはどのクラスターが最も大きいか判断できない場合は、各クラスターの上にマウス ポインターを置いてツールヒントを確認し、最も多くのケースが含まれているクラスターを選択します。  
  
7.  このクラスターを右クリックし、[**クラスター名の変更**] を選択します。 新しい名前を`Largest Cluster`入力します。  
  
 クラスターを表すノードからドリルスルーして、各クラスター内のケースの詳細を表示することができます。 たとえば、顧客に電子メールを送信するなど、分析の結果に対して操作を実行する場合に便利です。 構造には含まれているがモデルでは使用されていない、ケースのその他の属性を参照することもできます (Region や IncomeGroup など)。 マイニングモデルから基になるケースへのドリルスルーの詳細については、「[データマイニング&#41;&#40;のドリルスルークエリ](../../2014/analysis-services/data-mining/drillthrough-queries-data-mining.md)」を参照してください。  
  
#### <a name="to-drill-through-to-details-from-the-cluster-diagram"></a>クラスター ダイアグラムから詳細情報にドリルスルーするには  
  
1.  右クリック`Pacific Cluster`して [**ドリルスルー**] を選択し、[**モデルおよび構造列**] を選択します。  
  
     [**ドリルスルー** ] ダイアログボックスが表示されます。 モデルで使用されていないが、クエリに使用できる列には、**構造体**がプレフィックスとして付けられます。  
  
     このクラスターに含まれている顧客はほとんどが太平洋地域の顧客で、その他の地域の顧客はごくわずかであることがわかります。  
  
2.  入れ子になった列 v Assoc Seq Line Items のプラス記号をクリックして、特定の顧客注文のアイテムのシーケンスを表示します。  
  
3.  [**ドリルスルー** ] ダイアログボックスを閉じます。  
  
    > [!NOTE]  
    >  [**再生**] ボタンを使用すると、データを再クエリできます。ただし、他のプロセスによってバックグラウンドで動的に更新されていない限り、再クエリを行っても、表示されるデータは変更されません。  
  
 [ページのトップへ](#bkmk_CDiagram)  
  
##  <a name="cluster-profiles-tab"></a><a name="bkmk_CProfiles"></a>[クラスターのプロファイル] タブ  
 [**クラスターのプロファイル**] タブには、各クラスター内のシーケンスが表示されます。 クラスターは、[ **States (状態**)」列の右側にある個々の列に一覧表示されます。  
  
 ビューアーでは、**モデル**の行にはクラスター内の項目の全体的な分布が記述され、[**サンプル**] 行には項目のシーケンスが含まれます。 モデルの各セルのカラーシーケンスの各行。サンプル行は、クラスター内でランダムに選択されたユーザーの動作を表し**ます。**  
  
 シーケンス ヒストグラムでは、各製品モデルがそれぞれ異なる色で示されます。 マイニング凡例は、色分けと製品モデル名の両方を使用して製品のシーケンスを表します。 クラスターのモデルにその他の列 (Region や Income Group など) を追加した場合は、各列に対応する追加の行がビューアーに含まれます。それらの行には、各クラスター内のそれらの値の分布が表示されます。  
  
#### <a name="to-view-the-sequences-that-are-most-common-in-a-cluster"></a>クラスターで最も一般的なシーケンスを表示するには  
  
1.  クラスター `Largest Cluster`の列の**モデル**行を右クリックし、[**凡例の表示**] をクリックします。  
  
     **Color**列には、シーケンス内で見つかった項目の頻度を示す、網掛けされたバーが含まれています。 各アイテムがそれぞれ異なる色で表されます。 [**意味**列には、各色の製品モデル名が表示されます。 [**分布**] 列には、この項目がシーケンスに含まれていたケースの割合が示されます。  
  
2.  [**マイニング凡例**] を閉じます。  
  
3.  列の [母集団] 行を右クリックし、[**人口****凡例**] を選択します **。**  
  
4.  モデル全体のシーケンスの一覧をスキャンする`.`  
  
     マイニング凡例では最も一般的なシーケンスが最初に表示されるため、多くのシーケンスで Mountain Tire Tube が最初のアイテムになっていることがわかります。 これは、Mountain Tire Tube を最初に買い物かごに入れる顧客が多いことを示しています。  
  
#### <a name="to-drill-through-to-cases-from-the-cluster-viewer"></a>クラスター ビューアーからケースにドリルスルーするには  
  
1.  属性の`Region`行が見つかるまで、[属性] ペインを下にスクロールします。  
  
     この行には、モデル内の各クラスターのヒストグラムに加えて、モデルで使用されたケースのセット全体を表す、**母集団**のヒストグラムが1つ含まれています。 ヒストグラムとは、さまざまな色を含むバーで、それぞれの色が属性を表し、色の付いた部分のサイズがその色の属性を持つケースの割合を表します。  
  
2.  名前を変更`Pacific Cluster`したクラスターと`Largest Cluster`のヒストグラムを比較します。 各クラスターはそれぞれ異なる列に表示されます。  
  
     どちらも単色に見えますが、同じ色ではありません。  
  
3.  `Region`行内で、の`Largest Cluster`色分けされたヒストグラムの上にマウスポインターを置きます。  
  
     各地域のケースの実際の割合を示す値がツールヒントに表示されます。  
  
4.  `Region` `Pacific Cluster`の行で色分けされたヒストグラムを右クリックし、[**ドリルスルー**] を選択して、[**モデル列のみ**] を選択します。  
  
5.  スクロール バーを動かして、このクラスターのすべての顧客を調べます。  
  
     詳細情報にドリルスルーした結果からは、クラスターに含まれている注文のほとんどが太平洋地域からの注文であっても、北米地域やヨーロッパ地域からの注文もわずかに含まれていることがわかります。  
  
6.  [**ドリルスルー** ] ダイアログボックスを閉じます。  
  
 [ページのトップへ](#bkmk_CDiagram)  
  
##  <a name="cluster-characteristics-tab"></a><a name="bkmk_CChars"></a>[クラスターの特性] タブ  
 [**クラスターの特性**] タブには、選択したクラスターの属性値の重要度を視覚的に表す棒グラフが表示され、クラスター内の状態間の遷移が要約されます。 [**変数**] 列には、選択したクラスターまたは母集団にとって重要なモデル (特定の値または*遷移*と呼ばれる値間のリレーションシップ) が示されます。 [**値**] 列には、値または遷移の詳細が表示され、[**確率**] 列はこの属性または遷移の重みを視覚的に表します。  
  
#### <a name="to-view-the-important-attributes-for-a-cluster"></a>クラスターの重要な属性を表示するには  
  
1.  [**クラスター** ] ボックスの一覧で`Pacific Cluster`、を選択します。  
  
     一覧が更新され、名前を変更`Pacific Cluster`したクラスターの特性が表示されます。 このクラスターで最も重要な特性は`Region`です。  
  
2.  の`Region`行の網掛けされたバーの上にマウスポインターを置きます。  
  
     値が Pacific である確率が非常に高いことがわかります。 これらの値を解釈する方法の詳細については、「 [Microsoft シーケンスクラスターアルゴリズムテクニカルリファレンス](../../2014/analysis-services/data-mining/microsoft-sequence-clustering-algorithm-technical-reference.md)」を参照してください。  
  
3.  最初の遷移行が見つかるまでクラスターの特性の一覧を調べていきます。  
  
4.  遷移行には、[**変数**] 列のテキストの切り替えと、[**値**] 列のシーケンシャル属性値の組み合わせが含まれます。 [Start] や missing がシーケンスに含まれる場合もあります。  
  
     たとえば、遷移の値が [Start]-> 道路タイヤチューブであるとします。 そのクラスターの顧客がよく Road Tire Tube を最初に買い物かごに入れているということになります。 これは、その製品が顧客によって最初に探される人気のアイテムであることを示している場合もあれば、その製品がその購入サイトで見つけやすいということを示しているだけの場合もあります。  
  
5.  **[Start]** がないか、または**見つから**ない最初の遷移が見つかるまで、一覧をスクロールします。  
  
     たとえば、移行、**ツーリングタイヤ、ツーリングタイヤチューブ**を見つけたとします。 そのクラスターの顧客がこれらのアイテムをよくこの順序で一緒に購入していることになります。  
  
6.  この遷移の色付きのバーの上にマウス ポインターを置きます。  
  
     この遷移の確率がパーセントで表示されます。  
  
7.  [**クラスター** ] ボックスの一覧で、[**母集団 (すべて)**] を選択します。  
  
     属性の一覧が更新されて、モデルの作成に使用されたすべての注文の特性が表示されます。 このマイニングモデルでは、クラスターを区別するための最も重要`Region`な特性はで、値は**北米**です。  
  
 以上の作業から、2 つのことがわかりました。 1 つは、意味のある数の組み合わせを得るためには大量のデータが必要であるということです。 たとえば、確率が最も高いシーケンスには、 **[Start]** または**Missing**状態が含まれる可能性があります。  
  
 2つ目の方法は、の`Region`属性に対して強力なクラスタリング効果があることです。これにより、シーケンスのグループを確認するのが難しくなります。 したがって、地域や収入の列を含まない、シーケンスのみを使用する別のモデルを作成することにします。  
  
 [ページのトップへ](#bkmk_CDiagram)  
  
##  <a name="cluster-discrimination-tab"></a><a name="bkmk_CDiscrim2"></a>[クラスターの識別] タブ  
 [**クラスターの識別**] タブを使用すると、2つのクラスターを比較して、特定のクラスターを別のクラスターと区別する属性を特定できます。 このタブには、[**変数**]、[**値**]、[**クラスター 1**]、[**クラスター 2**] の4つの列があります。  クラスター **1**と**クラスター 2**として使用する任意のクラスターを選択できます。  
  
 [**変数**] 列には、属性の名前が表示されます。これは、列名または列名と単語の組み合わせのいずれか**になります**。 [**値**列には、属性または遷移の正確な値が表示されます。 **クラスター 1**と**クラスター 2**の列の網掛けされたバーは、比較しているクラスター内の属性の強度を示します。 バーが長いほど、その属性を持つケースがクラスターに含まれる可能性が高くなります。  
  
#### <a name="to-compare-two-clusters-by-using-the-cluster-discrimination-tab"></a>[クラスターの識別] タブを使用して 2 つのクラスターを比較するには  
  
1.  [**クラスターの識別**] タブで、[**クラスター 1**] にを選択`Pacific Cluster`します。  
  
     既定では、[**クラスター 2** ] の選択は、**太平洋標準クラスターの補数**に変わります。  
  
     他のすべてのケース`Pacific Cluster`と区別する最上位の属性は、領域です。 地域がクラスター化のための属性として強力すぎるために、他の属性がわかりにくくなっています。 この影響を回避するために、いくつかの小さなクラスターを互いに比較してみます。 そうすれば、属性の一覧が変更されて、モデル間の遷移がより多く含まれるようになる可能性があります。  
  
2.  遷移行を見つけて、色付きのバーの上にマウス ポインターを置きます。  
  
     [**値**] 列の項目には、状態と遷移の両方を含めることができます。 各アイテムの色は識別スコアを表します。 さまざまなスコアの意味の詳細については、「 [Analysis Services データマイニング&#41;&#40;シーケンスクラスターモデルのマイニングモデルコンテンツ](../../2014/analysis-services/data-mining/mining-model-content-for-sequence-clustering-models.md)」を参照してください。  
  
 [ページのトップへ](#bkmk_CDiagram)  
  
##  <a name="state-transitions-tab"></a><a name="bkmk_StateTran"></a>[状態遷移] タブ  
 [**状態遷移**] タブでは、クラスターを選択し、その状態遷移を参照できます。 [クラスター] ドロップダウンリストから [**母集団 (すべて)** ] を選択した場合、ダイアグラムには、マイニングモデル全体の状態の分布が表示されます。  
  
 グラフの各ノードは、分析しようとしているシーケンスの状態または使用可能な値を表します。 ノードの背景色は、その状態の頻度を表します。 一部の状態を結ぶ線は、状態間の遷移を表します。 スライダーを上下に動かして、遷移の確率のしきい値を変更することもできます。 一部のノードに関連付けられている数値は、その状態の確率を表します。  
  
#### <a name="to-explore-the-relationships-in-the-state-transition-tab"></a>[状態遷移] タブで関係を調査するには  
  
1.  マイニングモデルビューアーの [**状態遷移**] タブで、クラスター `Pacific Cluster`の一覧から選択します。 [**エッジラベルの表示**] オプションが選択されていることを確認します。  
  
     グラフが更新されて、このクラスターで最も一般的な遷移が表示されます。  
  
2.  別のノードと線で結ばれている任意のノードをクリックします。  
  
     グラフが更新されて、関連するノードが強調表示されます。 線の横の数値はその遷移の確率を表します。  
  
3.  スライダーを [すべての**リンク**] まで上げて、グラフに含まれる切り替え効果の数を増やします。  
  
4.  **クラスター**から [**母集団 (すべて)** ] を選択します。  
  
     別のクラスターを読み込むとグラフが既定の表示設定にリセットされるため、スライダー コントロールが中央の位置に戻ります。  
  
5.  グラフの最も暗いノードをクリックします。これは、"**スポーツ-100**" になります。  
  
     この製品を他の製品と結ぶ線はありません。  
  
6.  スライダーを 1 段階上に動かして、グラフに含まれる遷移の数を増やします。 **すべてのリンク**にまだアクセスしないようにしてください。  
  
     グラフが更新されていくつかの遷移が追加されますが、Sport-100 モデルを含む遷移はありません。  
  
7.  スライダーコントロールをすべての**リンク**に移動します。 まだ選択されていない場合は、Sport-100 ノードをクリックします。  
  
     グラフが更新されて、Sport-100 という製品を含む多数の遷移が表示されます。 ノードを結ぶ線の矢印の向きは、Sport-100 がペアの 1 つ目のアイテムとして選択されたか 2 つ目のアイテムとして選択されたかを表します。  
  
8.  Touring Tire のノードをクリックし、スライダー コントロールを中央の位置まで戻します。  
  
     最初に、ツーリングタイヤを他の製品に接続する多くの遷移線がありますが、確率のしきい値を上げると、遷移、ツーリングタイヤ > ツーリングタイヤチューブだけを残して、グラフからの移行が減少します。 この遷移は、顧客が Touring Tire を買い物かごに入れた場合、その次に Touring Tire Tube をかごに入れる確率が高いことを示しています。  
  
 [ページのトップへ](#bkmk_CDiagram)  
  
##  <a name="generic-content-tree-viewer"></a><a name="bkmk_Generic"></a>汎用コンテンツツリービューアー  
 このビューアーは、アルゴリズムやモデルの種類に関係なく、すべてのモデルで使用できます。 **Microsoft 汎用コンテンツツリービューアー**は、[**ビューアー** ] ドロップダウンリストから使用できます。  
  
 コンテンツ ツリーは、マイニング モデルを一連のノードで表したものです。各ノードは、トレーニング データに関する学習済みの知識を表します。 ノードには、いくつかの属性が共通するパターン、一連のルール、クラスター、または日付範囲の定義を含めることができます。 ノードの正確な内容はアルゴリズムや予測可能な属性に応じて変わりますが、内容の全体的な表示は同じです。  
  
 各ノードを展開して、より詳細なレベルで表示したり、任意のノードの内容をクリップボードにコピーしたりできます。 詳細については、「 [Microsoft 汎用コンテンツ ツリー ビューアーを使用したモデルの参照](../../2014/analysis-services/data-mining/browse-a-model-using-the-microsoft-generic-content-tree-viewer.md)」をご覧ください。  
  
#### <a name="to-view-details-for-a-sequence-clustering-model-by-using-the-generic-content-tree-viewer"></a>汎用コンテンツ ツリー ビューアーを使用してシーケンス クラスター モデルの詳細を表示するには  
  
1.  [**マイニングモデルビューアー** ] タブで、[**ビューアー** ] ボックスの一覧をクリックし、[ **Microsoft 汎用コンテンツツリービューアー**] を選択します。  
  
2.  [**ノードのキャプション**] ペインで`Pacific Cluster (1)`、[] をクリックします。  
  
     このノードの名前には、クラスターに割り当てた表示名と、基になるノード ID の両方が含まれています。 ノード ID を使用してモデルの詳細にドリル ダウンできます。  
  
3.  最初の子ノード ([**クラスター1のシーケンスレベル**]) を展開します。  
  
     クラスターのシーケンス レベル ノードには、そのクラスターに含まれる状態と遷移の詳細が含まれています。 これらの詳細 (NODE_DISTRIBUTION 列に表示されます) を使用して、各クラスターまたはモデル全体のシーケンスと状態を調査することができます。  
  
4.  ノードをさらに展開して、HTML ビューアー ペインに詳細を表示します。  
  
 マイニングモデルコンテンツの詳細およびビューアーでの詳細の使用方法については、「 [Analysis Services データ&#41;マイニングモデル &#40;シーケンスクラスターモデルのマイニングモデルコンテンツ](../../2014/analysis-services/data-mining/mining-model-content-for-sequence-clustering-models.md)」を参照してください。  
  
 [ページのトップへ](#bkmk_CDiagram)  
  
## <a name="next-task-in-lesson"></a>このレッスンの次の作業  
 [関連するシーケンスクラスターモデルの作成 &#40;中級者向けデータマイニングチュートリアル&#41;](../../2014/tutorials/creating-a-related-sequence-clustering-model-intermediate-data-mining-tutorial.md)  
  
## <a name="see-also"></a>参照  
 [Microsoft シーケンスクラスターアルゴリズム](../../2014/analysis-services/data-mining/microsoft-sequence-clustering-algorithm.md)   
 [Sequence Clustering Model Query Examples](../../2014/analysis-services/data-mining/sequence-clustering-model-query-examples.md)  
  
  
