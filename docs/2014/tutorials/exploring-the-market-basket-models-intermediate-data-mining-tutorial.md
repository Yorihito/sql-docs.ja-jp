---
title: マーケットバスケットモデルの調査 (中級者向けデータマイニングチュートリアル) |Microsoft Docs
ms.custom: ''
ms.date: 03/06/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
ms.assetid: da1c9cb7-6c32-4b9b-96ec-ecea772aeb77
author: minewiskan
ms.author: owend
manager: kfile
ms.openlocfilehash: 8a7b2f97cbda0594698c6cbaa68019a6493f1e74
ms.sourcegitcommit: 6fd8c1914de4c7ac24900fe388ecc7883c740077
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 04/26/2020
ms.locfileid: "63224606"
---
# <a name="exploring-the-market-basket-models-intermediate-data-mining-tutorial"></a>マーケット バスケット モデルの検証 (中級者向けデータ マイニング チュートリアル)
  モデルの`Association`作成が完了したので、データマイニングデザイナーの [ [!INCLUDE[msCoName](../includes/msconame-md.md)] **マイニングモデルビューアー** ] タブにある [関連付けビューアー] を使用してモデルを調べることができます。 このチュートリアルでは、ビューアーを使用してアイテム間の関係を検証する方法を、順を追って学習します。 ビューアーを使用すると、どの製品とどの製品がよく一緒に表示されるかが一目でわかるほか、新たなパターンの概観も可能です。  
  
 アソシエーション[!INCLUDE[msCoName](../includes/msconame-md.md)]ビューアーには、**ルール**、**アイテムセット**、および**依存関係ネットワーク**の3つのタブがあります。 これらのタブにはデータがそれぞれ少しずつ異なる形で表示されるため、モデルを検証する際には、異なるペインの間を何度も切り替えながら調査を進めるのが一般的です。  
  
-   [[依存関係ネットワーク] タブ](#bkmk_DepNet)  
  
-   [[アイテムセット] タブ](#bkmk_Itemsets)  
  
-   [[規則] タブ](#bkmk_Rules)  
  
-   [汎用コンテンツ ツリー ビューアー](#bkmk_ContentViewer)  
  
 このチュートリアルでは、[**依存関係ネットワーク**] タブから開始し、[**ルール**] タブと [**アイテムセット**] タブを使用して、ビューアーに表示されるリレーションシップについて理解を深めます。 また、 **Microsoft 汎用コンテンツツリービューアー**を使用して、個々のルールまたはアイテムセットの詳細な統計情報を取得します。  
  
##  <a name="dependency-network-tab"></a><a name="bkmk_DepNet"></a>[依存関係ネットワーク] タブ  
 [**依存関係ネットワーク**] タブでは、モデル内のさまざまな項目の相互作用を調べることができます。 ビューアーの各ノードはアイテムを表し、アイテム間を結ぶ線はルールを表します。 ノードを選択すると、選択したアイテムが他のどのノードによって予測されるか、また現在のアイテムがどのアイテムを予測するかがわかります。 アイテム間に双方向の関係がある (つまり同一トランザクション内に発生する可能性が高い) 場合もあります。 タブの下部にある色の凡例を参照すると、関係の方向を確認できます。  
  
 2 つのアイテムを結ぶ線は、それらのアイテムが同じトランザクションに含まれる可能性が高いことを示しています。 つまり、顧客がそれらのアイテムをまとめて購入する可能性が高いということになります。 スライダーはルールの確率に関連付けられています。 スライダーを下方向に移動すると、緊密な関係 (確率の高いルール) のみが表示されます。  
  
 依存関係ネットワークグラフには、ペアの規則が表示されます。これは、論理的に->B として表すことができます。つまり、製品 A を購入した場合は、製品 B が使用される可能性があります。 グラフでは、型 AB->C の規則を表示できません。 すべてのルールが表示される位置までスライダーを動かしてもグラフに線が表示されない場合は、アルゴリズム パラメーターの条件を満たす 1 対 1 のルールが存在しないことになります。  
  
 属性名の最初の数文字を入力してノードを名前で検索することもできます。 詳細については、「[[ノードの検索] ダイアログ ボックス (マイニング モデル ビューアー)](../../2014/analysis-services/find-node-dialog-box-mining-model-viewer.md)」を参照してください。  
  
#### <a name="to-open-the-association-mode-in-the-microsoft-assocaition-rules-viewer"></a>Microsoft アソシエーション ルール ビューアーで Association モデルを開くには  
  
1.  **ソリューションエクスプローラー**で、Association 構造をダブルクリックします。  
  
2.  データ マイニング デザイナーで、 **[マイニング モデル ビューアー]** タブをクリックします。  
  
3.  [**マイニングモデル**] ボックスの一覧で、マイニングモデルの一覧から [関連付け] を選択します。  
  
#### <a name="to-navigate-the-dependency-graph-and-locate-specific-nodes"></a>依存関係のグラフを操作して特定のノードを見つけるには  
  
1.  [**マイニングモデルビューアー** ] タブで、[**依存関係ネットワーク**] タブをクリックします。  
  
2.  各ノードのラベルを簡単に表示できるようにするには、[**拡大**] を何度かクリックします。  
  
     既定では、すべてのノードが見えるようにグラフが表示されます。 複雑なモデルでは、ノードの数が多いためにそれぞれのノードが非常に小さくなることがあります。  
  
3.  ビューアーの**+** 右下隅にある符号をクリックし、マウスボタンを押しながらグラフをパンします。  
  
4.  ビューアーの左側で、スライダーをドラッグして、[**すべてのリンク**] (既定) からスライダーコントロールの下部に移動します。  
  
5.  グラフが更新されて、最も強いアソシエーション (Touring Tire と Touring Tire Tube の間のアソシエーション) のみが表示されます。  
  
6.  [**ツーリングタイヤチューブ = Existing**] というラベルの付いたノードをクリックします。  
  
     グラフが更新されて、このアイテムとの間に強い関連があるアイテムのみが強調表示されます。 2 つのアイテム間の矢印の向きに注目してください。  
  
7.  ビューアーの左側で、スライダーをドラッグして一番下から真ん中あたりまで戻します。  
  
     2 つのアイテムを結ぶ矢印の変化に注目してください。  
  
8.  [依存関係ネットワーク] ウィンドウの上部にあるドロップダウンリストから [**属性名のみ表示**] を選択します。  
  
     グラフのテキスト ラベルが更新されて、モデル名のみが表示されます。  
  
 [ページのトップへ](#bkmk_DepNet)  
  
##  <a name="itemsets-tab"></a><a name="bkmk_Itemsets"></a>[アイテムセット] タブ  
 次に、Touring Tire と Touring Tire Tube という 2 つの製品についてモデルによって生成された、ルールとアイテムセットの詳細を調べます。 [**アイテムセット**] タブには、 [!INCLUDE[msCoName](../includes/msconame-md.md)]アソシエーションアルゴリズムによって検出されたアイテムセットに関連する3つの重要な情報が表示されます。  
  
-   **サポート:** アイテムセットが発生するトランザクションの数。  
  
-   **サイズ:** アイテムセット内のアイテムの数。  
  
-   **項目:** 各アイテムセットに含まれるアイテムの一覧です。  
  
 アルゴリズム パラメーターの設定方法によっては、多数のアイテムセットが生成される場合があります。 ビューアーに返される各アイテムセットは、アイテムが販売されたトランザクションを表します。 [**アイテムセット**] タブの上部にあるコントロールを使用して、指定した最小のサポートとアイテムセットのサイズを含むアイテムセットだけを表示するようにビューアーをフィルター処理できます。  
  
 別のマイニング モデルを使用していてアイテムセットが表示されない場合、それは、アルゴリズム パラメーターの条件を満たすアイテムセットが存在しないからです。 そのような場合は、サポートの値がもっと低いアイテムセットが許可されるようにアルゴリズム パラメーターを変更できます。  
  
#### <a name="to-filter-the-itemsets-that-are-shown-in-the-viewer-by-name"></a>ビューアーに表示されるアイテムセットを名前で絞り込むには  
  
1.  ビューアーの [**アイテムセット**] タブをクリックします。  
  
2.  [アイテムセットの**フィルター** ] ボックス`Touring Tire`に「」と入力し、ボックスの外側をクリックします。  
  
     その文字列を含むすべてのアイテムが返されます。  
  
3.  [**表示**] ボックスの一覧で、[**属性名のみ表示**] を選択します。  
  
4.  [**長い名前を表示する**] チェックボックスをオンにします。  
  
     アイテムセットの一覧が更新されて、"Touring Tire" という文字列を含むアイテムセットのみが表示されます。 アイテムセットの長い名前には、各アイテムの属性と値を含むテーブルの名前が含まれます。  
  
5.  [**長い名前を表示する**] チェックボックスをオフにします。  
  
     アイテムセットの一覧が更新されて、短い名前のみが表示されます。  
  
 **サポート**列の値は、各アイテムセットのトランザクションの数を示します。 アイテムセットのトランザクションとは、アイテムセット内のすべてのアイテムを含む購入のことです。  
  
 既定では、アイテムセットはサポートの降順でビューアーに表示されます。 列のヘッダーをクリックすると、アイテムセットを別の列 (アイテムセットのサイズや名前など) で並べ替えることができます。 アイテムセットに含まれる個々のトランザクションの詳細に関心がある場合は、アイテムセットから個々のケースにドリルスルーすることもできます。 ドリルスルーの結果には、モデルでは使用されなかった顧客の収入レベルと顧客 ID の構造列が含まれます。  
  
#### <a name="to-view-details-for-an-itemset"></a>アイテムセットの詳細を表示するには  
  
1.  アイテムセットの一覧で、[**アイテム**セット] 列見出しをクリックして、名前で並べ替えます。  
  
2.  (2 番目`Touring Tire`の項目を含まない) 項目を探します。  
  
3.  項目を`Touring Tire`右クリックし、[**ドリルスルー**] をクリックして、[**モデル列と構造列**] を選択します。  
  
     [**ドリル**スルー] ダイアログボックスには、このアイテムセットのサポートとして使用される個々のトランザクションが表示されます。  
  
4.  入れ子になったテーブル vAssocSeqLineItems を展開して、トランザクションの実際の購入の一覧を表示します。  
  
#### <a name="to-filter-itemsets-by-support-or-size"></a>アイテムセットをサポートまたはサイズで絞り込むには  
  
1.  [アイテムセットの**フィルター** ] ボックスに表示されるテキストをクリアします。 テキスト フィルターと数値フィルターを同時に使用することはできません。  
  
2.  [**最小サポート**] ボックスに「100」と入力し、ビューアーの背景をクリックします。  
  
     アイテムセットの一覧が更新されて、サポートが 100 以上のアイテムセットのみが表示されます。  
  
 [ページのトップへ](#bkmk_DepNet)  
  
##  <a name="rules-tab"></a><a name="bkmk_Rules"></a>[規則] タブ  
 [**ルール**] タブには、アルゴリズムによって検出されたルールに関連する次の情報が表示されます。  
  
-   **確率:** 左辺の項目が指定された場合に、右側の項目の確率として定義*されるルールの確率*。  
  
-   **重要度:** ルールの有用性の尺度。 この値が大きいほどルールの有効性が高くなります。  
  
     ルールの有効性を判断するための基準として重要度が用意されているのは、確率だけでは誤った判断を招く可能性があるためです。 たとえば、プロモーションの一環として各顧客のカートに自動的に水筒が追加される場合は、すべてのトランザクションに水筒が含まれるため、水筒の確率を 1 として予測するルールがモデルによって作成されます。 このルールは、確率に基づく限りはきわめて正確ですが、有用な情報にはなりません。  
  
-   **ルール:** ルールの定義。 マーケット バスケット モデルのルールでは、アイテムの特定の組み合わせを記述します。  
  
 各ルールを使用すると、他のアイテムが存在するかどうかに基づいて、あるアイテムがトランザクションに含まれるかどうかを予測することができます。 [**アイテムセット**] タブと同様に、最も関心のあるルールのみが表示されるようにルールをフィルター処理できます。 使用しているマイニング モデルにルールが 1 つもない場合は、アルゴリズム パラメーターを変更して、ルールの確率のしきい値を下げることができます。  
  
#### <a name="to-see-only-rules-that-include-the-mountain-200-bicycle"></a>Mountain-200 という自転車を含むルールのみを表示するには  
  
1.  [**マイニングモデルビューアー** ] タブで、[**ルール**] タブをクリックします。  
  
2.  [**ルールのフィルター** ] ボックスに`Mountain-200`、「」と入力します。  
  
     [**長い名前を表示する**] チェックボックスをオフにします。  
  
3.  [**表示**] ボックスの一覧から [**属性名のみ表示**] を選択します。  
  
     ビューアーには、"`Mountain-200`" という単語を含む規則のみが表示されます。 ルールの確率によって、他のユーザーが`Mountain-200`自転車を購入したときに、他の製品も購入される可能性があります。  
  
 ルールは確率の降順で表示されますが、列見出しをクリックして並べ替え順を変更できます。 特定のルールの詳細に関心がある場合は、ドリルスルーを使用して、そのルールをサポートするケースを表示することもできます。  
  
#### <a name="to-view-cases-that-support-a-particular-rule"></a>特定のルールをサポートするケースを表示するには  
  
1.  [**ルール**] タブで、表示するルールを右クリックします。  
  
2.  [**ドリルスルー**] を選択し、[**モデル列のみ**] または [**モデル列と構造列**] を選択します。  
  
     [**ドリルスルー** ] ダイアログボックスには、ウィンドウの上部にあるルールの概要と、ルールのサポートデータとして使用されたすべてのケースの一覧が表示されます。  
  
 [ページのトップへ](#bkmk_DepNet)  
  
##  <a name="generic-content-tree-viewer"></a><a name="bkmk_ContentViewer"></a>汎用コンテンツツリービューアー  
 このビューアーは、アルゴリズムやモデルの種類に関係なく、すべてのモデルで使用できます。 **Microsoft 汎用コンテンツツリービューアー**は、[**ビューアー** ] ドロップダウンリストから使用できます。  
  
 コンテンツ ツリーは、マイニング モデルを一連のノードで表したものです。各ノードは、データのサブセットに関する学習済みの知識を表します。 ノードには、いくつかの特徴が共通するパターン、一連のルール、クラスター、または日付範囲の定義を含めることができます。 ノードの正確な内容はアルゴリズムや予測可能な属性の種類に応じて変わりますが、内容の全体的な表示は同じです。 各ノードを展開して、より詳細なレベルで表示したり、任意のノードの内容をクリップボードにコピーしたりできます。  
  
#### <a name="to-view-details-about-the-rule-by-using-the-content-viewer"></a>コンテンツ ビューアーを使用してルールの詳細を表示するには  
  
1.  [**マイニングモデルビューアー** ] タブで、[**ビューアー** ] ボックスの一覧から [ **Microsoft 汎用コンテンツツリービューアー** ] を選択します。  
  
2.  [ノードのキャプション] ペインで、一覧を一番下までスクロールして最後のノードをクリックします。  
  
     ビューアーでは、最初にアイテムセット、次にルールが表示されますが、グループ化はされていません。 特定のノードを見つけるには、コンテンツ クエリを作成するのが最も簡単です。 詳細については、「 [結合モデルのクエリ例](../../2014/analysis-services/data-mining/association-model-query-examples.md)」を参照してください。  
  
3.  [ノードの詳細] ペインで、NODE_TYPE と NODE_DESCRIPTION の値を確認します。  
  
     ルールのノードの種類は 8 で、アイテムセットのノードの種類は 7 です。 ルールの NODE_DESCRIPTION の値は、ルールを構成する条件を表します。 アイテムセットの NODE_DESCRIPTION の値は、アイテムセットに含まれるアイテムを表します。  
  
 コンテンツ クエリを作成してルールの詳細な統計情報を取得することもできます。 マイニングモデルコンテンツとその解釈方法の詳細については、「[アソシエーションモデルのマイニングモデルコンテンツ &#40;Analysis Services データマイニング&#41;](../../2014/analysis-services/data-mining/mining-model-content-for-association-models-analysis-services-data-mining.md)」を参照してください。  
  
 [ページのトップへ](#bkmk_DepNet)  
  
## <a name="next-task-in-lesson"></a>このレッスンの次の作業  
 [マイニングモデルでの入れ子になったテーブルのフィルター処理 &#40;中級者向けデータマイニングチュートリアル&#41;](../../2014/tutorials/filtering-a-nested-table-in-a-mining-model-intermediate-data-mining-tutorial.md)  
  
## <a name="see-also"></a>参照  
 [レッスン 3: マーケットバスケットシナリオの構築 &#40;中級者向けデータマイニングチュートリアル&#41;](../../2014/tutorials/lesson-3-building-a-market-basket-scenario-intermediate-data-mining-tutorial.md)   
 [レッスン 4: シーケンスクラスターシナリオの構築中級者向けデータマイニングチュートリアル &#40;&#41;](../../2014/tutorials/lesson-4-build-sequence-clustering-scenario-intermediate-data-mining.md)   
 [Microsoft アソシエーションアルゴリズム](../../2014/analysis-services/data-mining/microsoft-association-algorithm.md)   
 [Microsoft アソシエーション アルゴリズム テクニカル リファレンス](../../2014/analysis-services/data-mining/microsoft-association-algorithm-technical-reference.md)  
  
  
