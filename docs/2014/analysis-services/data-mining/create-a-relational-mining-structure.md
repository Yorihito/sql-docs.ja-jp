---
title: リレーショナルマイニング構造を作成する |Microsoft Docs
ms.custom: ''
ms.date: 06/13/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- dimensions [Analysis Services], data mining
- data mining [Analysis Services], structure
- mining structures [Analysis Services], creating
- relational mining models [Analysis Services]
- OLAP mining models [Analysis Services]
ms.assetid: 5547d639-377d-4ca7-88fc-ce1f9e2babc5
author: minewiskan
ms.author: owend
ms.openlocfilehash: f2342cde485968bb40c523b9c7c3ae68d889f6fa
ms.sourcegitcommit: 2f166e139f637d6edfb5731510d632a13205eb25
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/08/2020
ms.locfileid: "84523708"
---
# <a name="create-a-relational-mining-structure"></a>Create a Relational Mining Structure
  ほとんどのデータ マイニング モデルは、リレーショナル データ ソースに基づいています。 リレーショナル データ マイニング モデルを作成する利点は、キューブの作成という複雑な作業をせずに、アドホック データをまとめ、モデルをトレーニングおよび更新できることです。  
  
 リレーショナル マイニング構造では、さまざまなソースからデータを取得できます。 生データは、データ ソース ビューの一部として定義可能であれば、テーブル、ファイル、またはリレーショナル データベース システムに格納できます。 たとえば、データが Excel、SQL Server データ ウェアハウス データベース、または SQL Server レポート データベースにある場合、あるいは OLE DB プロバイダーまたは ODBC プロバイダー経由でアクセスする外部ソースにある場合は、リレーショナル マイニング構造を使用する必要があります。  
  
 ここでは、データ マイニング ウィザードを使用して、リレーショナル マイニング構造を作成する方法の概要について説明します。  
  
 [必要条件](#BKMK_Relational_Structure)  
  
 [リレーショナル マイニング構造を作成するプロセス](#BKMK_Relational_Structure)  
  
 [データ ソースを選択する方法](#BKMK_ChooseRelData)  
  
 [コンテンツの種類とデータ型を指定する方法](#bkmk_ContentDataType)  
  
 [予約データセットを作成する理由と方法](#bkmk_Holdout)  
  
 [ドリルスルーを有効にする理由と方法](#BKMK_DrillThru)  
  
## <a name="requirements"></a>要件  
 最初に、既存のデータ ソースが必要です。 データ ソースがまだ存在しない場合は、データ ソース デザイナーを使用して、データ ソースを設定できます。 詳細については、「 [データ ソースの作成 &#40;SSAS 多次元&#41;](../multidimensional-models/create-a-data-source-ssas-multidimensional.md)」を参照してください。  
  
 次に、データ ソース ビュー ウィザードを使用して、必要なデータを 1 つのデータ ソース ビューにまとめます。 データ ソース ビューでデータを選択、変換、フィルター選択、または管理する方法の詳細については、「 [多次元モデルのデータ ソース ビュー](../multidimensional-models/data-source-views-in-multidimensional-models.md)」をご覧ください。  
  
##  <a name="overview-of-process"></a><a name="BKMK_Relational_Structure"></a>プロセスの概要  
 ソリューション エクスプローラーで **[マイニング構造]** ノードを右クリックし、 **[新しいマイニング構造の追加]** を選択して、データ マイニング ウィザードを起動します。 ウィザードでは、次の手順に従って新しいリレーショナル マイニング モデルの構造を作成します。  
  
1.  **[定義方法の選択]**: データ ソースの種類を選択し、 **[リレーショナル データベースまたはデータ ウェアハウスを使用する]** を選択します。  
  
2.  **[データ マイニング構造の作成]**: 構造のみを作成するか、構造と共にマイニング モデルも作成するかを決定します。  
  
     さらに、初期モデルに適切なアルゴリズムを選択します。 どのアルゴリズムが特定のタスクに適しているかについては、「[データ マイニング アルゴリズム (Analysis Services - データ マイニング)](data-mining-algorithms-analysis-services-data-mining.md)」をご覧ください。  
  
3.  **[データ ソース ビューの選択]**: モデルのトレーニングで使用するデータ ソース ビューを選択します。 データ ソース ビューには、テストに使用するデータや関連のないデータを含めることもできます。 構造およびモデルで実際に使用するデータを選択します。 また、後でデータにフィルターを適用することもできます。  
  
4.  **[テーブルの種類の指定]**: 分析に使用するケースを含むテーブルを選択します。 一部のデータ セット (特にマーケット バスケット モデルの作成に使用されるデータ セット) では、入れ子になったテーブルとして使用する関連テーブルを含めることもできます。  
  
     一意のレコードを識別する方法をアルゴリズムで認識できるように、各テーブルにキーを指定する必要があります。入れ子になったテーブルを追加した場合は、関連レコードも指定します。  
  
     詳細については、「 [マイニング構造列](mining-structure-columns.md)」をご覧ください。  
  
5.  **[トレーニング データの指定]**: このページでは、 *ケース テーブル*を選択します。ケース テーブルは、分析するうえで最も重要なデータを含むテーブルです。  
  
     一部のデータ セット (特にマーケット バスケット モデルの作成に使用されるデータ セット) では、関連テーブルを含めることもできます。 その入れ子になったテーブル内の値は、メイン テーブル内の 1 つの行 (またはケース) に関連付けられている複数の値として処理されます。  
  
6.  **[列のコンテンツおよびデータ型の指定]**: 構造で使用する列ごとに、 *データ型* と *コンテンツの種類*の両方を選択する必要があります。  
  
     ウィザードでは、使用可能なデータ型が自動的に検出されますが、ウィザードで推奨されているデータ型を使用する必要はありません。 たとえば、データに数値が含まれる場合でも、カテゴリ データを表していることがあります。 キーとして指定した列には、その特定のモデルの種類に適したデータ型が自動的に割り当てられます。 詳細については、「[マイニング モデル列](mining-model-columns.md)」および「[データ型 (データ マイニング)](data-types-data-mining.md)」をご覧ください。  
  
     モデルで使用するそれぞれの列に対して選択した *コンテンツの種類* により、アルゴリズムにおけるデータの処理方法が決まります。  
  
     たとえば、連続値を使用する代わりに、数値を分離できます。 また、アルゴリズムによって、列に最適なコンテンツの種類を自動的に検出することもできます。 詳細については、「[コンテンツの種類 (データ マイニング)](content-types-data-mining.md)」をご覧ください。  
  
7.  **[テスト セットの作成]**: このページでは、モデルのテスト用に使用するデータの量を指定します。 データで複数のモデルがサポートされている場合は、同じデータに対してすべてのモデルをテストできるように予約データセットを作成することをお勧めします。  
  
     詳細については、「 [テストおよび検証 (データ マイニング)](testing-and-validation-data-mining.md)" テンプレートを使用して、データ マイニング プロジェクトを作成します。  
  
8.  **[ウィザードの完了]**: このページでは、新しいマイニング構造と関連マイニング モデルに名前を付け、構造とモデルを保存します。  
  
     モデルの種類によっては、いくつかの重要なオプションを設定することもできます。 たとえば、構造のドリルスルーを有効にできます。  
  
     この段階で、マイニング構造とそのモデルは単なるメタデータです。結果を得るには、これらの両方を処理する必要があります。  
  
##  <a name="how-to-choose-relational-data"></a><a name="BKMK_ChooseRelData"></a>リレーショナルデータを選択する方法  
 リレーショナル マイニング構造は、OLE DB データ ソースで使用可能なすべてのデータに基づいて作成できます。 ソース データが複数のテーブルに格納されている場合は、データ ソース ビューを使用して、必要なテーブルと列を 1 か所にまとめることができます。  
  
 テーブルに1対多のリレーションシップが含まれている場合 (分析する顧客ごとに複数の購入レコードがある場合など)、両方のテーブルを追加し、ケーステーブルとして1つのテーブルを使用して、リレーションシップの "多" の側のデータを入れ子になったテーブルとしてリンクすることができます。  
  
 マイニング構造のデータは、既存のデータ ソース ビューから取得されます。 データ ソース ビュー内のデータを必要に応じて変更し、基になるリレーショナル データに存在しないリレーションシップや派生列を追加できます。 また、データ ソース ビュー内に名前付き計算または集計を作成することもできます。 これらの機能は、データ ソースでデータの配置を制御できない場合や、データ マイニング モデルに対してデータの異なる集計をテストする場合に非常に便利です。  
  
 使用可能なすべてのデータを使用する必要はありません。マイニング構造に含める列を選択できます。 その構造に基づいているすべてのモデルでそれらの列を使用できます。また、特定のモデルの特定の列に `Ignore` というフラグを設定することもできます。 データ マイニング モデルのユーザーがマイニング モデルの結果からドリル ダウンして、マイニング モデル自体に含まれていなかった追加のマイニング構造列を確認できるようにすることができます。  
  
##  <a name="how-to-specify-content-type-and-data-type"></a><a name="bkmk_ContentDataType"></a>コンテンツの種類とデータ型を指定する方法  
 データ型は、SQL Server などのアプリケーション インターフェイスで指定するデータ型とほぼ同じで、日付/時刻、さまざまなサイズの数値、ブール値、テキスト、およびその他の不連続なデータがあります。  
  
 一方、コンテンツの種類はデータ マイニングにとって重要で、分析の結果に影響を与えます。 コンテンツの種類により、アルゴリズムにおけるデータの処理方法 (数値を連続して処理するかビン分割するか、 有効な値がいくつあるか、 各値が重複していないか、 値がキーの場合、キーの種類はどのようなものですか。日付/時刻値、シーケンス、またはその他の種類のキーを示していますか。  
  
 選択するデータ型によって、コンテンツの種類の選択が制限される場合があります。 たとえば、数値でない値は分離できません。 目的のコンテンツの種類が表示されない場合は、 **[戻る]** をクリックしてデータ型のページに戻り、別のデータ型を選択します。  
  
 コンテンツの種類を間違えてもあまり気にする必要はありません。 新しいモデルを作成し、そのモデル内のコンテンツの種類を変更するのは非常に簡単です。ただし、新しいコンテンツの種類がマイニング構造のデータ型セットでサポートされている必要があります。 また、テスト目的や、別のアルゴリズムの要件に合わせる目的で、さまざまなコンテンツの種類を使用して複数のモデルを作成することも非常に一般的です。  
  
 たとえば、データに Income 列が含まれている場合、Microsoft デシジョン ツリー アルゴリズムを使用して 2 つの異なるモデルを作成し、それぞれの列を連続する数値と不連続な範囲のどちらかとして構成できます。 ただし、Microsoft Naïve Bayes アルゴリズムを使用してモデルを追加すると、列は分離された値のみに強制的に変更されます。これは、そのアルゴリズムでは連続する数値がサポートされていないためです。  
  
##  <a name="why-and-how-to-split-data-into-training-and-testing-sets"></a><a name="bkmk_Holdout"></a>データをトレーニングセットとテストセットに分割する理由と方法  
 ウィザードの終了間際では、データをトレーニング セットとテスト セットのどちらにパーティション分割するかを決定する必要があります。 データのランダムにサンプリングされた部分をテスト用に準備するこの機能により、一貫したテスト データのセットが新しいマイニング構造に関連するすべてのマイニング モデルで使用できるようになるため、非常に便利です。  
  
> [!WARNING]  
>  このオプションは、すべてのモデルの種類で使用できるわけではありません。 たとえば、予測モデルを作成しても、予約を使用することはできません。これは、タイムシリーズアルゴリズムでは、データにギャップがないことが要求されるためです。 予約データセットをサポートするモデルの種類の一覧については、「 [トレーニング データ セットとテスト データ セット](training-and-testing-data-sets.md)」をご覧ください。  
  
 この予約データセットを作成するには、テストに使用するデータの割合を指定します。 残りのすべてのデータはトレーニングに使用されます。 必要に応じて、テストに使用するケースの最大数を設定することや、ランダム選択プロセスの開始時に使用するシード値を設定することができます。  
  
 予約テスト セットの定義はマイニング構造と一緒に格納されます。これにより、構造に基づいて新しいモデルを作成するときに、このテスト データセットを使用してモデルの精度を評価できるようになります。 マイニング構造のキャッシュを削除すると、トレーニングおよびテストに使用したケースに関する情報も削除されます。  
  
##  <a name="why-and-how-to-enable-drillthrough"></a><a name="BKMK_DrillThru"></a>ドリルスルーを有効にする理由と方法  
 ウィザードのほぼ最後に、 *ドリルスルー*を有効にするオプションがあります。 このオプションを選択するのは簡単ではありませんが、これは重要なことです。 ドリルスルーを使用すると、マイニング モデルにクエリを実行することにより、マイニング構造内のソース データを表示できます。  
  
 なぜこれが役に立つのでしょうか。 たとえば、クラスター モデルの結果を表示し、特定のクラスターに配置された顧客を確認する必要がある場合、 ドリルスルーを使用すると、連絡先情報などの詳細を表示できます。  
  
> [!WARNING]  
>  ドリルスルーを使用するには、マイニング構造の作成時にドリルスルーを有効にする必要があります。 モデルのドリルスルーはモデルのプロパティを設定することで後から有効にできますが、マイニング構造のこのオプションは最初に設定する必要があります。 詳細については、「 [ドリルスルー クエリ (データ マイニング)](drillthrough-queries-data-mining.md)」をご覧ください。  
  
## <a name="see-also"></a>参照  
 [データマイニングデザイナー](data-mining-designer.md)   
 [データマイニングウィザード &#40;Analysis Services データマイニング&#41;](data-mining-wizard-analysis-services-data-mining.md)   
 [マイニングモデルのプロパティ](mining-model-properties.md)   
 [マイニング構造と構造列のプロパティ](properties-for-mining-structure-and-structure-columns.md)   
 [マイニング構造のタスクと操作方法](mining-structure-tasks-and-how-tos.md)  
  
  
