---
title: マイニング構造の作成 (SQL Server データマイニングアドイン) |Microsoft Docs
ms.custom: ''
ms.date: 12/29/2017
ms.prod: sql-server-2014
ms.reviewer: ''
ms.technology: analysis-services
ms.topic: conceptual
helpviewer_keywords:
- mining structures, creating
ms.assetid: b8b1eedc-4d6d-4429-a578-e629ec573934
author: minewiskan
ms.author: owend
ms.openlocfilehash: 485a3e12b46700319c760b878ecbdcfb8c97545d
ms.sourcegitcommit: 2f166e139f637d6edfb5731510d632a13205eb25
ms.translationtype: MT
ms.contentlocale: ja-JP
ms.lasthandoff: 06/08/2020
ms.locfileid: "84526678"
---
# <a name="create-mining-structure-sql-server-data-mining-add-ins"></a>マイニング構造の作成 (SQL Server データ マイニング アドイン)
  ![[データ マイニング] リボンの [マイニング構造の作成] ボタン](media/dmc-createstruct.gif "[データ マイニング] リボンの [マイニング構造の作成] ボタン")  
  
 モデルを作成することなく、分析に使用するデータセットを作成する場合は、**データモデリング**グループの **[詳細**設定] オプションを使用します。 この方法は、さまざまなアルゴリズムをテストする場合に便利です。  
  
 マイニング構造を作成したら、[[構造へのモデルの追加](add-model-to-structure-data-mining-add-ins-for-excel.md)] ウィザードを使用して、その構造に基づくモデルを作成します。 **データマイニング詳細クエリエディター**を使用して、新しいモデルを作成することもできます。  
  
 また、[!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] でサポートされているがウィザードでは使用できない、線形回帰、シーケンス クラスターなどの高度なアルゴリズムやカスタム アルゴリズムを使用してモデルを作成する場合に、このオプションを使用することもできます。  
  
> [!NOTE]  
>  マイニング構造を作成すると、すべてのモデルの検証に使用できる、ランダムに選択されるテスト データを設定することもできます。 この方法は、共通のデータセットに対するモデルの精度を簡単に比較できるため便利です。 オプションを選択し、**データをトレーニングセットとテストセットに分割**し、テスト用に予約するデータの適切な割合を指定します。通常は約30% です。  
  
## <a name="use-the-wizard-to-create-a-mining-structure"></a>ウィザードを使用したマイニング構造の作成  
  
1.  [**データマイニング**] リボンで、[**詳細設定**] をクリックし、[**構造の作成**] を選択します。  
  
2.  **[ソースデータの選択**] ダイアログボックスで、分析に使用するデータが含まれている excel 範囲、excel データテーブル、または外部データソースを指定します。  
  
     **[次へ]** をクリックします。  
  
3.  **[列の選択**] ダイアログボックスで、選択したデータソースで使用可能な列の一覧を確認します。  
  
4.  列名の右側にある矢印をクリックして、列の**使用法**を変更し、次の値から選択します。  
  
    -   **キー**。 各モデルに少なくとも 1 つのキーが必要です。  
  
    -   **キー時刻**。 このオプションは、予測モデルが必要な場合にのみ使用できます。  
  
    -   を**含め**ます。 列をマイニング構造で使用できるが、キー列ではありません。  
  
    -   **使用しないで**ください。 列はマイニング構造に含まれません。  
  
     モデルを作成する際はいつでも列を無視できますが、後で列を追加するには、構造とモデルを再処理する必要があることに注意してください。  
  
5.  参照ボタン ([. **..])** をクリックして、コンテンツの種類、データ型、およびモデリングフラグを設定します。  
  
    > [!NOTE]  
    >  列に数値データが含まれている場合は、必ずこのダイアログ ボックスを開いて、正しいデータ型が選択されていることを確認してください。 入力データが数値であっても、カテゴリ変数として処理したり、連続する数値ではなく不連続値として処理する場合があります。  
    >   
    >  たとえば、郵便番号列は既定では連続する long データ型として一覧表示されますが、より良い結果を得るために、不連続のテキスト値として処理するように指定することができます。  
    >   
    >  詳細については、「[データマイニング用のデータの選択](choosing-data-for-data-mining.md)」のコンテンツの種類に関するセクションを参照してください。  
  
     **[OK]** をクリックしてダイアログ ボックスを閉じます。  
  
6.  **[次へ]** をクリックします。  
  
     使用するデータ型に応じて、この手順を行った後にウィザードを完了することもできます。 その場合は、 **[完了**] ページに移動して、マイニング構造に名前を指定します。  
  
     その他のモデルの場合は、追加のオプションを選択してテスト データ セットを作成します。  
  
7.  [データを**トレーニングおよびテストデータセットに分割**] ダイアログボックスで、データをパーティション分割する方法を指定します。 既定では、データの 30% がテストに使用されます。  
  
     必要に応じて、テストに使用する最大行数を入力します。  
  
     **[次へ]** をクリックします。  
  
8.  **[完了**] ダイアログボックスで、新しいマイニング構造の名前と説明を入力します。  
  
9. **[完了]** をクリックします。  
  
### <a name="related-options"></a>関連オプション  
  
|オプション|コメント|  
|------------|--------------|  
|**[ソースデータの選択**] ダイアログボックス|Excel テーブルを選択したとき、データに既にヘッダーがあるかどうかを指定する必要があります。 これを省略した場合、データの最初の行は列名として使用されます。<br /><br /> [**外部データソース**] オプションを使用すると、データソースで定義できる任意の種類のデータを使用でき [!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] ます。 ただし、新しいデータ ソースを作成するためのアドインのダイアログ ボックスには、Analysis Services でサポートされているデータ ソースの一部が表示されないため、[!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] サーバーでデータ ソースを事前に作成してから、アドインを使用して接続することをお勧めします。|  
|[**データソースクエリエディター** ] ダイアログボックス|指定したデータ ソースに接続した後、列を追加したり、カスタム クエリを作成してカスタム列を生成することができます。|  
|**[データをトレーニング データ セットとテスト データ セットに分割]**|トレーニングセットとテストセットの推奨値は、トレーニングの場合は70%、テストの場合は30% です。ただし、大量のデータがある場合は、テストの最大行数を指定できます。|  
|[完了] ダイアログ ボックス|ドリルスルーのオプションは一部のモデルの種類で使用できます。特に、マイニング構造に詳細列が含まれる場合に便利です。 たとえば、クラスター モデルを作成した場合、特定のクラスター内の顧客に簡単に連絡できるように、分析ではなく、ドリルスルー用に名前や電子メール アドレスなどの詳細を含めることができます。|  
  
###  <a name="setting-column-usage-in-the-create-mining-structure-wizard"></a><a name="Bkmk_strctcolumn"></a>マイニング構造の作成ウィザードでの列の使用法の設定  
 新しいマイニング構造を作成する場合は、データ ソースのどの列をマイニング構造に含めるかと、それらの列の使用方法を指定できます。 1 つのマイニング構造には、複数のマイニング モデルを含めることができます。  
  
|値|説明|  
|------------|-----------------|  
|**Include (含める)**|列に格納されているデータは、分析または予測に使用されます。|  
|**キー**|列にトランザクション ID、系列 ID など、処理に必要なキーが格納されていることを表します。<br /><br /> すべてのアルゴリズムには、Key 列が必要です。 ただし、キーが 1 つのみ許可されるアルゴリズムと複数のキーが許可されるアルゴリズムがあります。<br /><br /> 列にキーが含まれていても処理に必要ない場合は、[**使用**しない] を選択します。|  
|**[キー時刻]**|タイム シリーズのアイテムを一意に識別するために使用できる日付などの数値が列に格納されていることを表します。|  
|**使用しない**|列が無視されます。 列のデータは処理されません。|  
  
 モデルを正しく処理するには、各行を一意に識別するキー列はどれなのか、予測可能モデルを作成する場合に予測を作成するための対象列はどれなのか、および対象列を予測するリレーションシップを作成するために入力列として使用する列はどれなのかをアルゴリズムに理解させる必要があります。  
  
-   **使用**しないように指定されている列は、マイニング構造には存在しません。  
  
     不要な列や不適切な値を含む列を追加すると、分析の結果に悪影響を及ぼす可能性があります。 そのため、適切な列だけを含めるようにしてください。 ただし、マイニング構造で使用しない列は、クエリに使用できないことに注意してください。  
  
-   **Include**型として指定された列は、マイニング構造に含まれ、後でマイニングモデルの分析または予測に使用できます。  
  
     列を使用する必要があるかどうか不明な場合は、その列をマイニング構造に含めておき、後でその列を使用しないマイニング モデルを作成できます。 たとえば、後で参照できるように電話番号列をデータに含めたものの、電話番号を無視するクラスター モデルを作成することもできます。 クラスターが作成された後、特定のクラスターに属する人の電話番号を返すクエリを作成できます。  
  
-   すべてのアルゴリズムに**キー**列が必要です。 Key 列の値は一意でなければなりません。 **Key time**列は、予測またはタイムシリーズモデルに対してのみ必要です。 .  
  
### <a name="requirements"></a>要件  
 データ マイニング構造を作成するには、[!INCLUDE[ssASnoversion](../includes/ssasnoversion-md.md)] のインスタンスに接続する必要があります。 一時的な構造を操作する場合も同様です。 接続を作成または変更する方法の詳細については、「 [Connect To Source data &#40;Excel 用データマイニングクライアント&#41;](connect-to-source-data-data-mining-client-for-excel.md)」を参照してください。  
  
## <a name="see-also"></a>参照  
 [データ マイニング モデルの作成](creating-a-data-mining-model.md)  
  
  
